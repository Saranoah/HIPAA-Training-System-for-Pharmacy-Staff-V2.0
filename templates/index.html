<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HIPAA Training System V2.0 - Pharmacy Staff</title>
    <meta name="description" content="HIPAA Training System V2.0 for Pharmacy Staff">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <meta name="csrf-token" content="{{ csrf_token }}">
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</head>
<body>
    <div class="container">
        <header class="header" role="banner">
            <h1>üè• HIPAA Training System V2.0</h1>
            <p>Professional Training for {{ user_role }} at {{ facility }}</p>
            <nav class="nav" aria-label="Main navigation">
                <ul>
                    <li><a href="{{ url_for('index') }}" aria-current="page">Dashboard</a></li>
                    <li><a href="{{ url_for('lessons') }}">Lessons</a></li>
                    <li><a href="{{ url_for('quiz') }}">Quiz</a></li>
                    <li><a href="{{ url_for('checklist') }}">Checklist</a></li>
                    <li><a href="{{ url_for('mfa_setup') }}">MFA Setup</a></li>
                    {% if user_role == 'Admin' %}
                    <li><a href="{{ url_for('admin_audit_logs') }}">Audit Logs</a></li>
                    {% endif %}
                    <li><a href="{{ url_for('logout') }}">Logout</a></li>
                </ul>
            </nav>
        </header>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number">{{ total_lessons }}</div>
                <div>Comprehensive Lessons</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">{{ total_questions }}</div>
                <div>Quiz Questions</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">{{ total_checklist }}</div>
                <div>Checklist Items</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">{{ hipaa_coverage|round|int }}%</div>
                <div>HIPAA Coverage</div>
            </div>
        </div>
        
        <div class="modules-grid" role="region" aria-label="Training Modules">
            <div class="module-card">
                <div class="module-icon" aria-hidden="true">üìö</div>
                <h3>HIPAA Lessons</h3>
                <p>Master comprehensive topics covering Privacy Rule, Security Rule, and more.</p>
                <div class="progress-bar" role="progressbar" aria-valuenow="{{ lessons_progress }}" aria-valuemin="0" aria-valuemax="100">
                    <div class="progress-fill" style="width: {{ lessons_progress }}%"></div>
                </div>
                <div>{{ lessons_completed }}/{{ total_lessons }} Completed</div>
                <a href="{{ url_for('lessons') }}" class="btn btn-primary" aria-label="Start HIPAA Lessons">Start Learning</a>
            </div>
            
            <div class="module-card">
                <div class="module-icon" aria-hidden="true">üéØ</div>
                <h3>Knowledge Quiz</h3>
                <p>Test your understanding with scenario-based questions.</p>
                <div class="progress-bar" role="progressbar" aria-valuenow="{{ quiz_progress }}" aria-valuemin="0" aria-valuemax="100">
                    <div class="progress-fill" style="width: {{ quiz_progress }}%"></div>
                </div>
                <div>Score: {{ quiz_progress|round|int }}%</div>
                <a href="{{ url_for('quiz') }}" class="btn btn-secondary" aria-label="Take Knowledge Quiz">Take Quiz</a>
            </div>
            
            <div class="module-card">
                <div class="module-icon" aria-hidden="true">‚úÖ</div>
                <h3>Compliance Checklist</h3>
                <p>Complete essential compliance items across all safeguards.</p>
                <div class="progress-bar" role="progressbar" aria-valuenow="{{ checklist_progress }}" aria-valuemin="0" aria-valuemax="100">
                    <div class="progress-fill" style="width: {{ checklist_progress }}%"></div>
                </div>
                <div>{{ checklist_completed }}/{{ total_checklist }} Completed</div>
                <a href="{{ url_for('checklist') }}" class="btn btn-primary" aria-label="Start Compliance Checklist">Start Checklist</a>
            </div>
        </div>
        
        <div id="session-timeout-warning" class="modal" role="dialog" aria-labelledby="timeout-title" style="display: none;">
            <div class="modal-content">
                <h2 id="timeout-title">Session Timeout Warning</h2>
                <p>Your session will expire in <span id="countdown">60</span> seconds.</p>
                <button class="btn btn-primary" onclick="extendSession()">Extend Session</button>
                <button class="btn btn-secondary" onclick="window.location.href='{{ url_for('logout') }}'">Logout</button>
            </div>
        </div>
    </div>
</body>
</html>
